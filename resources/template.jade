html
	mixin time(scheduled, estimated)
		if estimated === 'On time'
			= scheduled
		else
			del= scheduled
		= ' (' + estimated + ')'
	mixin services(header, serviceArray, fromStation, toStation)
		hr
		br
		strong= header
		br
		each service in serviceArray
			br
			strong
				+time(service.std, service.etd)
				= ' to ' + service.destinationStation.stationName
			br
			= 'Platform ' + (service.platform ? service.platform : 'unavailable')
			if toStation
				br
				= 'Arrives at ' + toStation.stationName + ' at '
				strong
					+time(service.sta, service.eta)
			br
			br
			hr.divider

	head
		include head.jade
	body
		include header.jade
		if (errorMessage)
			p.error= errorMessage
		if (departureObject)
			p
				strong= 'Departure board for ' + departureObject.fromStation.stationName + ' (' + departureObject.fromStation.stationCode + ')' + (departureObject.toStation ? (' calling at ' + departureObject.toStation.stationName + ' (' + departureObject.toStation.stationCode + ')') : '')
			if departureObject.nrccMessages
				each message in departureObject.nrccMessages
					p.error!= 'NRCC message: ' + message
			if (departureObject.trainServices.length + departureObject.busServices.length === 0)
				p No services found. Trntxt currently does not display information for routes requiring changes.
			if (departureObject.trainServices.length > 0)
				+services('Train services', departureObject.trainServices, departureObject.fromStation, departureObject.toStation)
			
			if departureObject.busServices.length > 0
				+services('Bus services',departureObject.busServices, departureObject.fromStation, departureObject.toStation)
		br
		br
		if toStation != undefined && fromStation != undefined
			p
				a(href='/'+toStation+'/'+fromStation) Switch Direction

		include footer.jade